<div class="capi-content">
    <div class="capybaraloader">
      <div class="capybara">
        <div class="capyhead">
          <div class="capyear">
            <div class="capyear2"></div>
          </div>
          <div class="capyear"></div>
          <div class="capymouth">
            <div class="capylips"></div>
            <div class="capylips"></div>
          </div>
          <div class="capyeye"></div>
          <div class="capyeye"></div>
        </div>
        <div class="capyleg"></div>
        <div class="capyleg2"></div>
        <div class="capyleg2"></div>
        <div class="capy"></div>
      </div>
      <div class="loader">
        <div class="loaderline"></div>
      </div>
    </div>
</div>
<div id="popup">
    <div class="ctnPopup">
        <div class="ctnCerrar">
            <div id="cerrarPop" class="cerrarPop">
                X
            </div>
        </div>
        <h3> CONDICIONES PARA EL TRATAMIENTO DE DATOS PERSONALES DE INTERESADOS</h3>
        <p>De acuerdo con la Ley N° 29733 - Ley de Protección de Datos Personales, su Reglamento y modificaciones, otorgo mi consentimiento libre, previo, inequívoco, expreso e informado a la Universidad Peruana Cayetano Heredia (en adelante, UPCH), con RUC N° 20110768151, para que mis datos personales queden incorporados en el Banco de Datos Personales denominado “Interesados”, con la finalidad de administrar y gestionar los datos personales de los interesados en todos los servicios ofrecidos por la UPCH y resolver sus consultas, así como para darle los usos previstos de publicidad y prospección comercial, fines estadísticos e históricos, análisis de perfiles, seguridad y prevención de riesgos, seguridad y control de acceso a la UPCH.</p>
        <p>Si no doy mi consentimiento, la UPCH no podrá tratar mis datos personales, lo que impedirá atender mi solicitud o cumplir con las finalidades indicadas.</p>
        <p>La UPCH realizará la transferencia nacional de mis datos personales a organizaciones o personas directamente relacionadas y otras entidades públicas. Además, llevará a cabo la transferencia internacional de dichos datos para su almacenamiento a través de Microsoft Corporation, ubicada en One Microsoft Way, Redmond, WA 98052 y Google LLC, ubicada en 1600 Amphitheatre Parkway, Mountain View, CA 94043, ambos con sede en los Estados Unidos. Para gestionar la comunicación, también se realizará transferencia de datos a Meta Platforms Inc., ubicada en 1601 Willow Road, Menlo Park, CA 94025; Amazon Web Services, ubicada en 1800 S Bell St. Arlington, VA 22202, ambos con sede en los Estados Unidos y a TikTok, ubicada en No. 48, Zhichun Road, Haidian, Beijing City, 100098, Pekín, China.</p>
        <p>Acepto que mis datos personales sean tratados por el tiempo necesario, con el propósito de cumplir las finalidades previamente indicadas.</p>
        <p>He sido informado que puedo ejercer mi derecho de información, acceso, rectificación, cancelación, oposición y otros derechos que me asisten como titular de los datos personales o revocar mi consentimiento. Para ejercer dichos derechos, puedo dirigirme al Área de Protección de Datos Personales de la Dirección de Tecnología de la Información, ubicada en Av. Honorio Delgado N° 430, Urb. Ingeniería, San Martín de Porres, Lima, o acceder a la página web: www.cayetano.edu.pe/proteccion-de-datos-personales y completar la "Solicitud de Derechos del Titular de Datos Personales".</p> 
        <p> La UPCH garantiza la estricta confidencialidad de mis datos personales y los tratará conforme a lo establecido en su Política de Privacidad y Protección de Datos Personales. </p>
    </div>
</div>
<div class="logo__container"><img class="upch_logo" src="https://lp.cayetano.edu.pe/wp-content/uploads/2024/05/logo_social_media-scaled.webp" lazy="loading"></div>
    <div class="global__container"><img src="https://lp.cayetano.edu.pe/wp-content/uploads/2023/06/bg-factor.jpg" alt="bg-factor" lazy="loading">
      <div class="crmWebToEntityForm container__form" id="crmWebToEntityForm">
        <meta http-equiv="content-type" content="text/html;charset=UTF-8">
        <style>
          .oculto {
              display: none;
              
          }
        </style>
        <form class="formulario" id="my-form-pregrado">
          <!--<input type="text" style="display: none" name="xnQsjsdp" value="dca2765a5d03016cc1ad249409ff360c153a5fb0aaecfb26c1b12a317d835ec6">-->
          <!--<input id="zc_gad" type="hidden" name="zc_gad" value="">-->
          <!--<input type="text" style="display: none" name="xmIwtLD" value="3b29c2ff618317f97dd6fe14c66f4b58b836008d814bab6189b926723e3d6c43e37730ae448c9ec137dd562bea4e913d">-->
          <!--<input type="text" style="display: none" name="actionType" value="TGVhZHM=">-->
          <!-- ACA LA REDIRECCION-->
          <!--<input type="text" style="display:none;" name="returnURL" value="https://lp.cayetano.edu.pe/counter/">-->
          <div class="formulario__title">
            <h3>REGISTRO DE LEADS - REFERIDOS</h3>
          </div>
          <div class="formulario__content" id="form__content">
            <div class="input__duo">
              <input class="input__item" id="first-name" type="text" name="first-name" maxlength="40" required autocomplete="off" placeholder="Primer Nombre*" />
              <input class="input__item" id="first-last-name" type="text" name="first-last-name" maxlength="40" required autocomplete="off" placeholder="Apellido Paterno*" />
            </div>
            <div class="input__duo">
              <input class="input__item" id="second-last-name" type="text" name="second-last-name" maxlength="40" required autocomplete="off" placeholder="Apellido Materno*"/>
              <input class="input__item" id="phone" type="text" name="phone" maxlength="9" pattern="9[0-9]{8}" required autocomplete="off" placeholder="Celular*" />
            </div>
            <!--======================================================-->
            <div class="input__duo">
                <select class="input__item" id="type-document" name="type-document" required>
                    <option value="" disabled selected>- Tipo de Documento -</option>
                    <option value="994950000">DNI</option>
                    <option value="994950001">Carnet de Extranjeria</option>
                    <option value="994950002">Pasaporte</option>
                </select>
                <input class="input__item" id="number-document" type="text" name="number-document" maxlength="20" required autocomplete="off" placeholder="N.° de documento*" />
            </div>
            <input class="input__item" id="email" type="email" name="email" maxlength="100" required autocomplete="off" placeholder="Correo*" />
            
            <select class="requerido input__item" id="type" required="">
              <option value="" disabled="" selected="">- Tipo de Programa -</option>
              <option value="pregrado">Pregrado OPG</option>
              <option value="pge">PGE</option>
              <option value="especialidades">Especialidades</option>
            </select>
            <select class="input__item" id="tipo-especialidad">
              <option value="" disabled="" selected="">- Tipo de Especialidad -</option>
              <option value="enf">Enfermería</option>
              <option value="est">Estomatología</option>
              <option value="vet">Veterinaria</option>
              <option value="tm">Tecnologías Médicas</option>
            </select>
            
            <select class="UTM input__item utm_campaign" id="utm_campaign" type="text" name="utm_campaign" required="">
              <option value="" disabled="" selected="">UTM Campa&ntilde;a</option>
            </select>
            
            <select class="input__item" id="career" name="career" required>
                <option value disabled selected>- Seleccionar carrera -</option>
            </select>
            
            <select class="input__item" id="degree-study" name="degree-study">
                <option value="" disabled selected>¿En qué grado se encuentra?</option>
            </select>
            
            <select class="input__item" id="degree-study-pos" name="degree-study-pos">
                <option value="" disabled selected>¿En qué grado se encuentra?</option>
            </select>
            
            <select class="requerido input__item" id="utm_content" name="utm_content" required="">
                <option value="" disabled="" selected="">Asesor</option>
                <option value="Juan Alvarez">Juan Alvarez</option>
                <option value="Andrea Amable">Andrea Amable</option>
                <option value="Angelo Medrano">Angelo Medrano</option>
                <option value="César Lazo">César Lazo</option>
                <option value="César Lewis">César Lewis</option>
                <option value="Danira Pizarro">Danira Pizarro</option>
                <option value="Edwin Alarcon">Edwin Alarcon</option>
                <option value="Eduardo Ubilluz">Eduardo Ubilluz</option>
                <option value="Esteban Flores">Esteban Flores</option>
                <option value="German Chiara">German Chiara</option>
                <option value="Gianina Porroa">Gianina Porroa</option>
                <option value="Gisell Sánchez">Gisell Sánchez</option>
                <option value="Greysi Escobar">Greysi Escobar</option>
                <option value="Gustavo Barzola">Gustavo Barzola</option>
                <option value="Isaac Huaman">Isaac Huaman</option>
                <option value="Jhan Espinoza">Jhan Espinoza</option>
                <option value="Joselyn Salinas">Joselyn Salinas</option>
                <option value="Karla Soria">Karla Soria</option>
                <option value="Kevin Obrien">Kevin Obrien</option>
                <option value="Luis Fernandez">Luis Fernandez</option>
                <option value="Nélida Tomanguilla">Nélida Tomanguilla</option>
                <option value="Nicole Cordero">Nicole Cordero</option>
                <option value="Reynaldo Zorrilla">Reynaldo Zorrilla</option>
                <option value="Rosmeri Castillon">Rosmeri Castillon</option>
                <option value="Sebastian Cavero">Sebastian Cavero</option>
                <option value="Steysy Deudor">Steysy Deudor</option>
                <option value="Treyci Martinez">Treyci Martinez</option>
                <option value="William Medina">William Medina</option>
                <option value="Yanina Barreto">Yanina Barreto</option>
                <!--<option value="Otro">Otro</option>-->
            </select>
            <select class="requerido input__item" id="utm_term" name="utm_term" required="">
              <option value="" disabled="" selected="">Canal de Origen</option>
              <option value="llamada">Llamada</option>
              <option value="whatsapp">Whatsapp</option>
              <option value="counter">Counter</option>
            </select>
            <div class="oculto">
              <input class="UTM" id="utm_source" name="LEADCF183" value="landing">   <!-- utm_content-->
              <input class="UTM" id="utm_medium" name="LEADCF189" value="direct">
              <!-- utm_medium-->
              <!-- <input class="UTM" id="utm_campaign" name="LEADCF24" value=""> utm_campaign-->
               <input class="UTM" id="utm_id" name="LEADCF203" value="referidos">
               <!-- utm_ID-->
              <input class="UTM" id="utm_term" name="LEADCF184" value="">
               <!--utm-term-->
              <!--<input class="UTM" id="utm_content" name="LEADCF182" value="-">-->
              <!-- utm_content-->
              <input id="reference" name="LEADCF168" value="">
              <!-- reference-->
              <!-- <input class="" id="LEADCF2" name="LEADCF2" value="">-->
              <input id="LEADCF185" name="LEADCF185" value="PREGRADO">
              <!-- marca-->
              <input id="LEADCF7" name="LEADCF7" value="">
              <input name="Lead Status" value="Sin gestión">
              <!-- lead status-->
              <input name="LEADCF1" value="Automáticos">
              <!-- tipo_origen-->
              <input name="LEADCF198" value="Postulante">
              <!-- parentezco-->
              <input name="Lead Source" value="Landing Page">
              <!-- fuente_lead-->
              <input id="LEADCF22" name="LEADCF22" value="">
              <!-- comentario-->
              <input id="LEADCF194" name="LEADCF194" value="">
              <!-- horario_disponible-->
              <!-- <input class="" id="LEADCF220" name="LEADCF302" value="Tecnología Médica Terapia Ocupacional"> programa_academico-->
              <input id="LEADCF10" name="LEADCF10" value="">
              <!-- periodo-->
              <input class="" id="LEADCF34" name="LEADCF34" value="Si asecto">
              <input id="origin" class="origin" value="">
            </div>
            <div class="terminos">
                <input type="checkbox" required />
                <h3 id="labelCheckbox">
                    Declaro haber leído y acepto la
                    <a href="https://cayetano.edu.pe/politica-privacidad/" target="_blank" style="text-decoration: underline; font-size:1.4rem;"> Política de Privacidad
                    </a>, y autorizo a la Cayetano, conforme a lo establecido <span id="pop" style="text-decoration:underline;cursor:pointer;">aquí</span>, el tratamiento de mis datos personales.
                </h3>
            </div>
          </div>
          <div class="formulario__bottom">
            <button class="form__button" type="submit">
              <h3>Registrar lead en CRM</h3>
            </button>
          </div>
          <script>
          
            let refSocial = document.getElementById('reference');
            let urlSocial = window.location.href;
            refSocial.value = urlSocial;
            
            let button = document.querySelector('.form__button');
            document.querySelector('.container__form').addEventListener("submit", (ev) => {
                    document.querySelector('.capi-content').style.display = "flex";
                    button.disabled = true;
                }
            )
            
            window.addEventListener("load", function () {
                const tiposDocumento = {
                    994950000: {
                        minLength: 8,
                        maxLength: 8,
                        pattern: "[0-9]{8}",
                        title: "Debe contener exactamente 8 dígitos numéricos",
                        placeholder: "",
                        type: "text",
                        inputmode: "numeric",
                    },
                    994950001: {
                        minLength: 5,
                        maxLength: 20,
                        pattern: "[0-9]{5,20}",
                        placeholder: "",
                        title: "Solo números, entre 5 y 20 dígitos",
                        type: "text",
                        inputmode: "numeric",
                    },
                    994950002: {
                        minLength: 6,
                        maxLength: 20,
                        pattern: "[A-Za-z0-9]{6,20}",
                        placeholder: "",
                        title: "Letras y números, entre 6 y 20 caracteres",
                        type: "text",
                        inputmode: "text",
                    },
                };
                let tipoDocumento = document.getElementById("type-document");
                let numeroDocumento = document.getElementById("number-document");
                tipoDocumento.addEventListener('change', function () {
                    const tipo = this.value;
                    if (tipo in tiposDocumento) {
                        const datosDocumento = tiposDocumento[tipo];
                        numeroDocumento.setAttribute('minlength', datosDocumento.minLength);
                        numeroDocumento.setAttribute('maxlength', datosDocumento.maxLength);
                        numeroDocumento.setAttribute('pattern', datosDocumento.pattern);
                        numeroDocumento.value = "";
                        numeroDocumento.setAttribute('value', datosDocumento.value);
                        numeroDocumento.setAttribute('placeholder', datosDocumento.placeholder);
                        numeroDocumento.setAttribute('title', datosDocumento.title);
                    } else {
                        numeroDocumento.removeAttribute('minlength');
                        numeroDocumento.removeAttribute('maxlength');
                        numeroDocumento.removeAttribute('pattern');
                        numeroDocumento.removeAttribute('placeholder');
                        numeroDocumento.removeAttribute('title');
                    }
                });
            });
            
            document.getElementById('my-form-pregrado').addEventListener("submit", function(ev) {
                        
                ev.preventDefault();
                
                let promotor = document.getElementById('utm_content').value;
                let prop = "";
                
                switch( promotor ) {
                  case "Andrea Amable":
                    prop = "4319ba83-9f22-f011-8c4d-002248367022";
                    break; 
                  case "Angelo Medrano":
                    prop = "3f278080-9f22-f011-8c4e-002248e0f801";
                    break; 
                  case "César Lazo":
                    prop = "6c268080-9f22-f011-8c4e-002248e0f801";
                    break; 
                  case "César Lewis":
                    prop = "bd268080-9f22-f011-8c4e-002248e0f801";
                    break; 
                  case "Edwin Alarcon":
                    prop = "12278080-9f22-f011-8c4e-002248e0f801";
                    break; 
                  case "Esteban Flores":
                    prop = "3119ba83-9f22-f011-8c4d-002248367022";
                    break; 
                  case "German Chiara":
                    prop = "2218ba83-9f22-f011-8c4d-002248367022";
                    break; 
                  case "Gianina Porroa":
                    prop = "d417ba83-9f22-f011-8c4d-002248367022";
                    break; 
                  case "Isaac Huaman":
                    prop = "2a440130-c298-f011-b41b-6045bd3bf1a2";
                    break;
                  case "Gisell Sánchez":
                    prop = "25e25f13-824d-f011-877b-002248e0eef1";
                    break; 
                  case "Greysi Escobar":
                    prop = "28e25f13-824d-f011-877b-002248e0eef1";
                    break; 
                  case "Gustavo Barzola":
                    prop = "07ea7a86-9f22-f011-8c4e-002248e0f801";
                    break; 
                  case "Jhan Espinoza":
                    prop = "668fe255-ed5c-f011-877b-000d3a88aec2";
                    break; 
                  case "Joselyn Salinas":
                    prop = "33ea7a86-9f22-f011-8c4e-002248e0f801";
                    break; 
                  case "Karla Soria":
                    prop = "7617ba83-9f22-f011-8c4d-002248367022";
                    break; 
                  case "Kevin Obrien":
                    prop = "5519ba83-9f22-f011-8c4d-002248367022";
                    break; 
                  case "Luis Fernandez":
                    prop = "24ea7a86-9f22-f011-8c4e-002248e0f801";
                    break; 
                  case "Nélida Tomanguilla":
                    prop = "98b11971-9f22-f011-8c4d-002248367022";
                    break; 
                  case "Nicole Cordero":
                    prop = "6718ba83-9f22-f011-8c4d-002248367022";
                    break; 
                  case "Reynaldo Zorrilla":
                    prop = "f784bd71-5036-f011-8c4d-002248370ba7";
                    break; 
                  case "Sebastian Cavero":
                    prop = "9319ba83-9f22-f011-8c4d-002248367022";
                    break; 
                  case "Steysy Deudor":
                    prop = "8017ba83-9f22-f011-8c4d-002248367022"; 
                    break; 
                  case "Treyci Martinez":
                    prop = "a119ba83-9f22-f011-8c4d-002248367022";
                    break; 
                  case "William Medina":
                    prop = "1019ba83-9f22-f011-8c4d-002248367022";
                    break; 
                  case "Yanina Barreto":
                    prop = "b9cdb001-4046-f011-877a-6045bd3a2cb5";
                    break;
                  case "Juan Alvarez":
                    prop = "dc18ba83-9f22-f011-8c4d-002248367022";
                    break;
                  case "Danira Pizarro":
                    prop = "25b20a32-55a8-f011-bbd3-002248e0be41";
                    break;
                  case "Eduardo Ubilluz":
                    prop = "a9269dec-9fb9-f011-bbd3-002248e0be41";
                    break;
                  case "Rosmeri Castillon":
                    prop = "1fe18513-ff93-f011-b4cb-6045bd3c84a3";
                    break;
                  default:
                    break;
                }
                
                const PrimerNombre = document.getElementById("first-name").value;
                const ApellidoPaterno = document.getElementById("first-last-name").value;
                const ApellidoMaterno = document.getElementById("second-last-name").value;
                const TipoDocumento = Number(document.getElementById("type-document").value);
                const NroDocumento = document.getElementById("number-document").value;
                const Correo = document.getElementById("email").value;
                const GradoEstudio = Number(document.getElementById("degree-study").value);
                const CodigoPais = "+51";
                const Programa = document.getElementById("career").value;
                
                // let programs = ["066372f8-161f-f011-998b-002248383b9f", "5edd571c-fa3f-f011-877a-6045bd3c8409", "146372f8-161f-f011-998b-002248383b9f"];
                // let programPivot = document.getElementById("career").value;
                // let Periodo = '';
                // let CampanaOrigen = '';
                
                // if(programs.includes(programPivot)) {
                //     Periodo = "2bfa94eb-9bb6-f011-bbd3-6045bd3c84a3";
                //     CampanaOrigen = "a70f3bcc-def6-f011-8407-000d3ac04e17";
                // } else {
                //     Periodo = document.getElementById("LEADCF10").value;
                //     CampanaOrigen = document.getElementById("origin").value;
                // }
                
                const Periodo = document.getElementById("LEADCF10").value;
                const CampanaOrigen = document.getElementById("origin").value;
                
                const UtmCampaign = document.getElementById("utm_campaign").value;
                const UtmTerm = document.getElementById("utm_term").value;
                const UtmSource = document.getElementById("utm_source").value;
                const UtmMedium = document.getElementById("utm_medium").value;
                const UtmId = document.getElementById("utm_id").value;
                const UtmContent = document.getElementById("utm_content").value;
                const Celular = document.getElementById("phone").value;
                const Origen = 8;
                const ConsentimientoPoliticaPrivacidad = true;
                const AutorizoTratamientoDatos = true;

                // const Periodo = ;
                const Fuente = "db7a50c5-5ef5-ef11-be21-000d3ac1f096";
                const UrlReferencia = document.getElementById("reference").value;
                const Propietario = prop;
                // const CampanaOrigen = ;

                const datos = {
                    PrimerNombre,
                    ApellidoPaterno,
                    ApellidoMaterno,
                    TipoDocumento,
                    NroDocumento,
                    Correo,
                    GradoEstudio,
                    Programa,
                    UtmCampaign,
                    UtmTerm,
                    UtmSource,
                    UtmMedium,
                    UtmId,
                    UtmContent,
                    Celular,
                    Origen,
                    CodigoPais,
                    ConsentimientoPoliticaPrivacidad,
                    AutorizoTratamientoDatos,
                    Periodo,
                    Fuente,
                    UrlReferencia,
                    Propietario,
                    CampanaOrigen
                }
                
                console.log(datos)
                console.log(JSON.stringify(datos))
                
                try {
                    // ../cxcrm.php
                    fetch('../cxcrm.php', {
                        method: "POST",
                        headers: { 
                            'Content-Type': "application/json",
                            'Accept': "application/json"
                        },
                        body: JSON.stringify(datos)
                    })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        return response.text();  
                    })
                    .then(text => {
                        try {
                            
                            const data = JSON.parse(text);
                            console.log(data);
                            if (data.crmResponse.IsSuccess !== true) {
                                console.log("hubo un error");
                            } else {
                                window.location.href = "https://lp.cayetano.edu.pe/referidos/";
                            }
                            
                        } catch (error) {
                            console.error("Error parseando JSON:", error);
                        }
                    })
                    .catch(error => console.error("Error en la petición:", error));

                    
                } catch ( error ) {
                    console.log(error)
                }
                
            })
            
          </script>
        </form>
      </div>
      <!-- SCRIPT-->
      <!-- OTHER SCRIPT-->
      <!--<script id="wf_anal" src="https://crm.zohopublic.com/crm/WebFormAnalyticsServeServlet?rid=0437d1c573ea9551a6f78fecc75ed055b133d8637c177b8a930789ad34d2a8bfef7546cab2b29a294f78be18933a2358gid144c28dbf479caf4a652b4f2dd53fb61d7dd73ce678f540722674f734ca738b3gidf7258617d9ad292e18817da2738bf8d68d0f8283158afb13ff49649786a97d5egidc810aa67d5387b528f6ea9ce8821a5817278f4c9c284b8c15ca440a2904cd61e&amp;tw=dd956dad13176aee758bad58a08496c10165e0e8527fe8a62da2a32461edd34c"></script>-->
      <!--<iframe name="captchaFrame" style="display:none;"></iframe>-->
    </div>